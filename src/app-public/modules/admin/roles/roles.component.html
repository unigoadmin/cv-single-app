<vex-page-layout>
  <vex-page-layout-header class="pb-16" fxLayout="column" fxLayoutAlign="center start">
      <div [class.px-gutter]="'fullwidth'" class="w-full flex flex-col sm:flex-row justify-between">
          <div>
              <h1 class="title mt-0 mb-1">Admin</h1>
              <vex-breadcrumbs  [crumbs]="['Admin','Roles']"></vex-breadcrumbs>
          </div>
      </div>
  </vex-page-layout-header>
  <vex-page-layout-content [class.px-gutter]="'fullwidth'" class="-mt-6  h-full">
      <div class="card overflow-auto -mt-16">
        <div class="bg-app-bar px-6 h-16 border-b sticky left-0" fxLayout="row" fxLayoutAlign="start center">
          <button (click)="openMenu()" @scaleIn class="sm:hidden text-primary-contrast" mat-icon-button type="button">
            <mat-icon [icIcon]="icMenu"></mat-icon>
          </button> 
          <h2 class="title my-0 ltr:pr-4 rtl:pl-4 ltr:mr-4 rtl:ml-4 ltr:border-r rtl:border-l" fxFlex="none" fxHide.xs>
                Roles
          </h2>
            <div class="bg-card rounded-full border px-4"
                 fxFlex="400px"
                 fxFlex.lt-md="auto"
                 fxHide.xs
                 fxLayout="row"
                 fxLayoutAlign="start center">
              <ic-icon [icIcon]="icSearch" size="20px"></ic-icon>
              <input [formControl]="searchCtrl"
                     class="px-4 py-3 border-0 outline-none w-full bg-transparent"
                     placeholder="Search roles"
                     type="search">
            </div>
    
            <div  class="bg-card  border  ml-5" style="width: 170px;">
              <button mat-button [matMenuTriggerFor]="categoryMenu" fxFlex="auto" color="primary">
                {{selectedModuleName }} <mat-icon>expand_more</mat-icon>
              </button>
            </div>
            <span fxFlex></span>
    
            <button class="ml-4" fxFlex="none" fxHide.gt-xs mat-icon-button type="button">
              <mat-icon [icIcon]="icSearch"></mat-icon>
            </button>
            <button (click)="addRole()"
                    class="ml-4"
                    color="primary"
                    fxFlex="none"
                    mat-mini-fab
                    matTooltip="Add Role"
                    type="button">
              <ic-icon [icon]="icAdd" inline="true" size="18px" ></ic-icon>
            </button>
          </div>
        
<!--          
          <mat-drawer-container class="bg-transparent flex-auto flex">
            <mat-drawer [(opened)]="menuOpen" mode="over">
              <cv-roles-table-menu *ngIf="menuData && menuData.length>0" (filterChange)="setData($event)"
                                       (openAddNew)="addRole()"
                                       class="sm:hidden"
                                       [items]="menuData"></cv-roles-table-menu>
            </mat-drawer>
            <mat-drawer-content class="p-gutter pt-0 flex-auto flex items-start">
              <cv-roles-table-menu  *ngIf="menuData && menuData.length>0" (filterChange)="setData($event)"
                                       (openAddNew)="addRole()"
                                       class="hidden sm:block mr-6"
                                       [items]="menuData"></cv-roles-table-menu>
      
              <div class="card h-full overflow-hidden flex-auto">
                <cv-roles-data-table (editRole)="editRole($event)"
                                         (viewRole)="viewRole($event)"
                                         (openRolePermissions)="openRolePermissions($event)"
                                         (openRoleUsers)="openRoleUsers($event)"
                                         [columns]="tableColumns"
                                         [data]="tableData"
                                         [searchStr]="searchStr$ | async"></cv-roles-data-table>
              </div>
            </mat-drawer-content>
      
          </mat-drawer-container> -->
          <cv-roles-data-table (editRole)="editRole($event)"
          (viewRole)="viewRole($event)"
          (openRolePermissions)="openRolePermissions($event)"
          (openRoleUsers)="openRoleUsers($event)"
          [columns]="tableColumns"
          [data]="tableData"
          [searchStr]="searchStr$ | async"></cv-roles-data-table>
      </div>
  </vex-page-layout-content>
  
<mat-menu #categoryMenu="matMenu" >
  <ng-container *ngFor="let module of menuData">
    <button mat-menu-item (click)="filterCategory(module.id)">{{module.label}}</button>
  </ng-container>
</mat-menu>

  



